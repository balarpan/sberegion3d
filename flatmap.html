<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<title>СБЕРБАНК. Потенциал лесопромышленного комплекса.</title>
<link rel="stylesheet" href='css/style.css'>
<script type="text/javascript" src='js/jquery-3.2.1.min.js'></script>
<style>
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }

    #homeDiv {
      left: 15px;
      top: 130px;
      z-index: 35;
      position: absolute;
    }
</style>

<script type="text/javascript">
var config = {
  // regionRF: "http://services.arcgis.com/HOo89W8RWwrXP286/arcgis/rest/services/GeoFIAS_2016_08/FeatureServer/0"
  regionRF: "https://services.arcgis.com/HOo89W8RWwrXP286/ArcGIS/rest/services/Regions_RF/FeatureServer/1",
  regionDetailed: "https://services.arcgis.com/HOo89W8RWwrXP286/ArcGIS/rest/services/Regions_RF/FeatureServer/0",
  regionTable: "http://services.arcgis.com/HOo89W8RWwrXP286/ArcGIS/rest/services/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B/FeatureServer/0",
  globeView: location.search.match(/globeView=([\w\-]+)/) ? RegExp.$1==true : false,
  regionCode: location.search.match(/regionCode=([\w\-]+)/) ? parseInt(RegExp.$1) : false,
}
var path_location = location.href.replace(/\/[^/]+$/, '');
var dojoConfig = {
  // look for a locale=xx query string param, else default to 'en-us'
  locale: location.search.match(/locale=([\w\-]+)/) ? RegExp.$1 : "en-us",
  // packages: [{
  //   name: "config",
  //   location: path_location + '/config'
  // }]

};
</script>
<link rel="stylesheet" href="https://js.arcgis.com/4.4/esri/css/main.css">
<script src="https://js.arcgis.com/4.4/"></script>

</head>
<body>

  <div id="viewDiv">
    <div id="mapLoadingProgress" class='mapLoadingProgress progress-line' "></div>
  </div>
  <div id="homeDiv"></div>

<script type="text/javascript">
'use strict'

require([
  "esri/Map",
  "esri/views/MapView",
  "esri/layers/FeatureLayer",
  "esri/core/watchUtils",
  "dojo/domReady!"
], function(Map, MapView, FeatureLayer,
  watchUtils
) {

  var regionsRFLyr = new FeatureLayer({
    url: config.regionDetailed,
    // definitionExpression: "Status = 'CBM' OR Status = 'EOR' OR Status = 'GAS' OR Status = 'INJ' OR Status = 'O&G' OR Status = 'OIL' OR Status = 'SWD'",
    outFields: ["*"],
    definitionExpression: 'RegionCode='+config.regionCode
  });

  var map = new Map({
    basemap: "gray",
    layers: [regionsRFLyr]
  });

  var view = new MapView({
    map: map,  // References a Map instance
    container: "viewDiv"  // References the ID of a DOM element
  });  

});


</script>

</body>
</html>